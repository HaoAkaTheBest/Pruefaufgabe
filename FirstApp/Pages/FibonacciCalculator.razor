@page "/fibonacci-calculator"
@using FirstApp.Helper;
<h3>Fibonacci Calculator</h3>

<p>
    Each new term in the Fibonacci sequence is generated by adding the previous two terms.<br />
    By starting with 1 and 2, the first 10 terms will be:
    1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...<br />
    By considering the terms in the Fibonacci sequence whose values do not exceed four million,
    find the sum of the even-valued terms.
</p>

<label for="maxNumber">Enter the maximum Fibonacci number:</label>
<input type="text" id="maxNumber" @bind="maxNumber" />

<button @onclick="CalculateSum">Calculate Sum of Even Fibonacci Numbers</button>

<div>
    @if (calculated)
    {
        <p>Sum of even Fibonacci numbers up to @maxNumber: @sum</p>
    }
</div>

@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger">
        @errorMessage
    </div>
}

@code {
    private string maxNumber = "4000000";
    private long sum;
    private bool calculated;
    private string errorMessage;



    private void CalculateSum()
    {
        try
        {
            sum = EvenFibonacciNumbers.Sum(maxNumber);
            calculated = true;
        }
        catch (Exception ex)
        {
            errorMessage = ex.Message;
        }
        
    }
}
